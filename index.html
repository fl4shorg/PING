<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            background: #000;
        }
        canvas { 
            display: block; 
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="1365" height="618"></canvas>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        // Função para ler parâmetros da URL
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const urlParams = {};
            
            if (params.has('name')) urlParams.name = params.get('name');
            if (params.has('speed')) urlParams.speed = params.get('speed');
            if (params.has('label')) urlParams.label = params.get('label');
            if (params.has('system')) urlParams.system = params.get('system');
            if (params.has('datetime')) urlParams.datetime = params.get('datetime');
            
            return urlParams;
        }

        // Função principal de desenho
        function drawBanner() {
            const W = canvas.width, H = canvas.height;
            const urlParams = getUrlParams();

            ctx.clearRect(0, 0, W, H);

            // Fundo gradiente
            const g = ctx.createLinearGradient(0, 0, 0, H);
            g.addColorStop(0, "#0a1635");
            g.addColorStop(1, "#0a1129");
            ctx.fillStyle = g;
            ctx.fillRect(0, 0, W, H);

            // Efeito de brilho radial
            const g2 = ctx.createRadialGradient(W/2, H/2, 0, W/2, H/2, H);
            g2.addColorStop(0, "rgba(0, 247, 255, 0.05)");
            g2.addColorStop(1, "rgba(180, 0, 255, 0.05)");
            ctx.fillStyle = g2;
            ctx.fillRect(0, 0, W, H);

            // Texto do nome
            const name = (urlParams.name || "NEON").toUpperCase();
            ctx.font = "900 80px Orbitron, sans-serif";
            ctx.textAlign = "center";
            ctx.textBaseline = "top";
            ctx.fillStyle = "#ffffff";
            ctx.fillText(name, W/2, 200);

            // Texto da velocidade
            const speed = String(urlParams.speed || "999");
            ctx.font = "900 70px Orbitron, sans-serif";
            ctx.fillStyle = "#00f7ff";
            ctx.fillText(speed, W/2, 300);

            // Texto do label
            const label = (urlParams.label || "VELOCIDADE").toUpperCase();
            ctx.font = "700 40px Orbitron, sans-serif";
            ctx.fillStyle = "#ffffff";
            ctx.fillText(label, W/2, 400);

            // Texto do sistema (opcional)
            const system = (urlParams.system || "").toUpperCase();
            if (system) {
                ctx.font = "600 28px Orbitron, sans-serif";
                ctx.fillStyle = "#b8e6ff";
                ctx.fillText(system, W/2, 450);
            }

            // Retornar a imagem como data URL
            const dataURL = canvas.toDataURL("image/png");
            
            // Se for uma requisição API, retornar JSON com a imagem
            if (Object.keys(urlParams).length > 0) {
                const response = {
                    success: true,
                    message: "Banner gerado com sucesso",
                    image: dataURL,
                    timestamp: new Date().toISOString(),
                    parameters: urlParams
                };
                
                // Esconder canvas e mostrar JSON
                canvas.style.display = 'none';
                document.body.innerHTML = '<pre>' + JSON.stringify(response, null, 2) + '</pre>';
            }
        }

        // Carregar fontes e iniciar
        const link = document.createElement('link');
        link.href = 'https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=swap';
        link.rel = 'stylesheet';
        document.head.appendChild(link);

        // Aguardar fontes carregarem e desenhar
        setTimeout(drawBanner, 100);
    </script>
</body>
</html>